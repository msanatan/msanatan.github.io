{"componentChunkName":"component---src-templates-blog-post-js","path":"/blog/2017/06/18/react-native-lessons-from-first-app/","result":{"data":{"site":{"siteMetadata":{"title":"Marcus Sanatan"}},"markdownRemark":{"id":"6d642388-b856-5732-8c9a-c0c21d245d50","excerpt":"React is pretty easy to get into and the community tends to encourage intelligent design principles for highly reusable code. Coming from a background in Ionic…","html":"<p>React is pretty easy to get into and the community tends to encourage intelligent design principles for highly reusable code. Coming from a background in Ionic and Xamarin, I had high standards for what a cross-platform solution needs to provide to get me using it. React Native can more than match up with the other frameworks. I created another <a href=\"https://github.com/msanatan/GitHubProjects\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">GitHub API interfacing app</a> which simply allows you to search for GitHub users, select a repository and view the README for that repo. As I’m still learning RN I’ve been focusing on developing the right way. While I don’t have all the answers to my questions just yet, here are some concerns and issues I had and the decisions I made to address them.</p>\n<h2>Code Sharing Across Platforms</h2>\n<p>When you start a RN project you’ll see two files: index.android.js and index.ios.js. No hard guesses why each of them are there but… it’s not like we’re going to write the same code twice. So the first thing I did was create an index.js file which would have the logic for the app. Now all I need my platform specific index files to do is reference the index.js file.</p>\n<p>The index.js file has the component which kicks off the application:</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span>\n  StackNavigator<span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react-navigation'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> SearchScreen <span class=\"token keyword\">from</span> <span class=\"token string\">'./scenes/SearchScreen'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> RepoViewScreen <span class=\"token keyword\">from</span> <span class=\"token string\">'./scenes/RepoViewScreen'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> GitHubProjects <span class=\"token operator\">=</span> <span class=\"token function\">StackNavigator</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  <span class=\"token literal-property property\">Search</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token literal-property property\">screen</span><span class=\"token operator\">:</span> SearchScreen<span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">navigationOptions</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token literal-property property\">title</span><span class=\"token operator\">:</span> <span class=\"token string\">'GitHub Search'</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">RepoView</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token literal-property property\">screen</span><span class=\"token operator\">:</span> RepoViewScreen\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> GitHubProjects<span class=\"token punctuation\">;</span></code></pre></div>\n<p>The index.android.js and index.ios.js will now import the app’s primary component and register it:</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> AppRegistry <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react-native'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> GitHubProjects <span class=\"token keyword\">from</span> <span class=\"token string\">'./src'</span><span class=\"token punctuation\">;</span>\n\nAppRegistry<span class=\"token punctuation\">.</span><span class=\"token function\">registerComponent</span><span class=\"token punctuation\">(</span><span class=\"token string\">'GitHubProjects'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> GitHubProjects<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>The index file isn’t explicitly referenced because it’s placed in the src directory. This worked well for my example app as it didn’t have any platform specific setup to do. At worst it would have platform specific componenents which could be easily segmented at the component level using the Platform module.</p>\n<h2>Application Structure</h2>\n<p>Ionic and Xamarin have strong opinions about how applications should be developed, your app’s structure comes as part of the package in a way. React has a philosophy which applies to both the DOM and Native elements but does not impose an application structure with a heavy hand. I didn’t want this app to be one page magic wand. I wanted a structure that was scalable, facilitates component reusability and wouldn’t be alien to the community.</p>\n<p>After my fair share of reading I felt the best match for my requirements were described in a <a href=\"https://medium.com/@alexmngn/how-to-better-organize-your-react-applications-2fd3ea1920f1\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">blog post by JS developer Alex Mangin</a>.</p>\n<p>I can’t encourage you enough to have a look. In summary, I stuck with the following architecture and will continue to do so for React and React Native applications:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">|-index.android.js\n|-index.ios.js\n|-all other top-level files/directories\n|-src\n  |-components\n    |-Component1\n      |-components\n      |-index.js\n      |-styles.js\n  |-scenes\n    |-Scene1\n      |-components\n      |-services\n      |-styles.js\n      |-index.js\n  |-services\n    |-service\n      |-index.js</code></pre></div>\n<p>The top-level components are global ones that can be reused anywhere in the app. Scenes refer to a page in the application and could have components, services and styles that are specific to it. Services would contain your APIs.</p>\n<h2>Theming</h2>\n<p>One of the things I really liked about Ionic was its natural beauty. A default app looked georgous and that made the whole world happy. There’s no real escaping from styling an application but there can be better foundations than a blank palette. While searching for what’s out there I came across this neat list of UI component kits for RN on <a href=\"https://www.quora.com/What-is-the-best-UI-Kit-for-react-native\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Quora</a>.</p>\n<p>I gave <a href=\"https://react-native-training.github.io/react-native-elements\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">React Native Elements</a> a go but after a closer look at each I’m gravitating towards <a href=\"https://nativebase.io\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">NativeBase</a> more and and more.</p>\n<h3>React Native Elements And Lists</h3>\n<p>So if you use React Native Elements you’ll be happy to see how much easier it is to populate a list compared to the default ListView that was standard before version 0.45 came out with FlatList components. The ListView component inherited from the ScrollView component but React Native Elements’ List component inherits from View. So if you want that scroll be sure to wrap it around the List:</p>\n<div class=\"gatsby-highlight\" data-language=\"xml\"><pre class=\"language-xml\"><code class=\"language-xml\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>ScrollView</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>List</span><span class=\"token punctuation\">></span></span>\n    ...amazing ListItem stuff here\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>List</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>ScrollView</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<h2>Event Handlers</h2>\n<p>If a parent component passes down a function to child component for an event handler, React would not <a href=\"https://facebook.github.io/react/blog/2015/01/27/react-v0.13.0-beta-1.html#autobinding\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">automatically bind ‘this’</a>. Many a blog posts and tutorials would show you event handlers like the following: <code class=\"language-text\">onPress={() => doSomething()}</code>. It’s been noted by many that creating functions in a component’s render function is a bad idea for <a href=\"https://medium.com/@esamatti/react-js-pure-render-performance-anti-pattern-fb88c101332f\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">performance reasons</a>.</p>\n<p>Unfortunately I did not read the lovely React blog early enough and as much I could I manually bind the event handlers in the component’s constructor. Your best bet is to use ES7’s class properties with the arrow function which would automatically bind ‘this’ for you.</p>\n<h2>So Much More To Go</h2>\n<p>Even though I’d like for this information to be useful I’m hoping that it’s really obvious to you because that means I’m on the right path. React and React Native are fun but the rabbit hole goes deep. But sure to read the myriad of blogs out there as you’re probably not the first person facing your problem.</p>\n<p>Happy React Nativing!</p>","frontmatter":{"title":"React Native: Lessons from First App","tags":["javascript","react","react native"],"date":"2017-06-18","updated":null}},"previous":{"fields":{"slug":"/blog/2017/05/10/renaming-react-native-apps"},"frontmatter":{"title":"Renaming React Native Apps"}},"next":{"fields":{"slug":"/blog/2017/10/05/fun-with-pygame"},"frontmatter":{"title":"Fun with Pygame"}}},"pageContext":{"id":"6d642388-b856-5732-8c9a-c0c21d245d50","previousPostId":"73c351af-66d1-52d7-ae67-0722ae73ed35","nextPostId":"41d7556c-8e0a-56ce-80fc-20f4faeba704"}},"staticQueryHashes":["1391858338"],"slicesMap":{}}