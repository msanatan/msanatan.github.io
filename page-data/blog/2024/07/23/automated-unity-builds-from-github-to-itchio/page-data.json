{"componentChunkName":"component---src-templates-blog-post-js","path":"/blog/2024/07/23/automated-unity-builds-from-github-to-itchio/","result":{"data":{"site":{"siteMetadata":{"title":"Marcus Sanatan"}},"markdownRemark":{"id":"602dc378-2b56-5845-995f-13776573c8d3","excerpt":"We’re all too old to make manual builds, over and over again. Let’s free up some local computer resources and build in the cloud! Anytime I’m taking part in a…","html":"<p>We’re all too old to make manual builds, over and over again. Let’s free up some local computer resources and build in the cloud! Anytime I’m taking part in a game jam, no matter the engine, the first thing I do is set up the repo on GitHub, and add some basic CI/CD. Automated builds save so much of your time!</p>\n<p>What do our automated builds typically do?</p>\n<ul>\n<li>They can lint and test code (I’ve never done this in a game jam but I’ve definitely done this for companies)</li>\n<li>Build your app i.e. create the exe, app, apk, whatever you need to deploy</li>\n<li>Push it somewhere, in this case itch.io, but it can be the Google/App Store as well for example</li>\n</ul>\n<p>This post will show you how to automatically deploy your Unity project as a WebGL game on itch.io when you push your code to your GitHub repository.</p>\n<h2>Prerequisites</h2>\n<p>I’m assuming that:</p>\n<ul>\n<li>You have admin access to a GitHub repo with a Unity project</li>\n<li>You have admin access to an itch.io project</li>\n<li>You have a basic understanding of <a href=\"https://docs.github.com/en/actions\">GitHub Actions</a></li>\n</ul>\n<h2>High Level Breakdown</h2>\n<p>Since we’re using GitHub, we should use GitHub Actions for workflow automation. You’re not limited to GH Actions, but it has a generous free tier and it’s supported out the box.</p>\n<p>One key GH Action we’ll be using is the <a href=\"https://game.ci/\">GameCI</a> Unity builder. GameCI abstracts a lot of the Unity set up and work for us. It also works with Gitlab Actions, Docker and other CI/CD options and tools.</p>\n<p>The other key GH Action that we use is the <a href=\"https://github.com/yeslayla/butler-publish-itchio-action\">Butler Push</a> action. <a href=\"https://itch.io/docs/butler/\">Butler</a> is a CLI tool developed by itch.io to facilitate automated deployments. The Butler Push action was created by a developer to set up the CLI tool, and push an executable to our project.</p>\n<p>You don’t need these actions to build a Unity game, or push to itch.io. You can install and set up Unity yourself and run its build commands. You can also install Butler CLI and run the publish command. That way, it’s closer to what you do manually on your computer. If it’s set up that way and something goes wrong, it’s very easy to debug by testing the commands on your PC! However, using pre-made, battle-tested GH actions save you a load of time.</p>\n<blockquote>\n<p><strong>Note</strong>: Just because software is open source, doesn’t mean you should trust it. This also applies to these GitHub Actions. I <strong><em>highly recommend</em></strong> looking through the source code of every GitHub Action you use, especially when you need to give it your credentials. Malicious actors have and will use software for legitimate purposes to steal your data. Also, when using these GH Actions, use a specific version of it. This mitigates the chance of your build breaking because something you depended on changed with an update.</p>\n</blockquote>\n<p>So that’s our flow, we’ll be setting up GitHub Actions to build our Unity game with GameCI, and deploy it to itch.io with the Butler Push action.</p>\n<h2>Setup</h2>\n<p>To use GameCI, and deploy to itch.io, we need to set up the following repository secrets and environment variables:</p>\n<ul>\n<li><strong>UNITY_LICENSE</strong> - Follow the guide to get this, as it’s a bit more difficult for personal licenses: <a href=\"https://game.ci/docs/github/activation/\">https://game.ci/docs/github/activation/</a></li>\n<li><strong>UNITY_EMAIL</strong></li>\n<li><strong>UNITY_PASSWORD</strong></li>\n<li><strong>BUTLER_CREDENTIALS</strong> - On itch.io, create API keys on this page: <a href=\"https://itch.io/user/settings/api-keys\">https://itch.io/user/settings/api-keys</a></li>\n</ul>\n<p>And 2 variables:</p>\n<ul>\n<li><strong>ITCH_GAME</strong> - The URL slug of your project e.g. <code class=\"language-text\">https://&lt;YOUR_USER>.itch.io/&lt;YOUR_GAME></code>, use the last part of the URL</li>\n<li><strong>ITCH_USER</strong> - Your username</li>\n</ul>\n<p>You can configure these in your project settings page -> Secrets and variables -> Actions:</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 600px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/5be16484e130abb9660cba09991549e4/47999/github-settings.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 58.00000000000001%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAMABQDASIAAhEBAxEB/8QAFgABAQEAAAAAAAAAAAAAAAAAAAEF/8QAFQEBAQAAAAAAAAAAAAAAAAAAAAH/2gAMAwEAAhADEAAAAcSyWAf/xAAVEAEBAAAAAAAAAAAAAAAAAAAQQf/aAAgBAQABBQJh/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPwE//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPwE//8QAFBABAAAAAAAAAAAAAAAAAAAAIP/aAAgBAQAGPwJf/8QAGhABAQACAwAAAAAAAAAAAAAAAQAQYRExQf/aAAgBAQABPyHxl0Sa4jtLj//aAAwDAQACAAMAAAAQd9//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/ED//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/ED//xAAaEAEAAwADAAAAAAAAAAAAAAABABEhMUFR/9oACAEBAAE/ECQJTkdxh3Y4qNKXyItsW2f/2Q=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Image of GitHub project setings page, showing the location of the repository secrets and variables required to make the CI/CD set up work\"\n        title=\"\"\n        src=\"/static/5be16484e130abb9660cba09991549e4/b4294/github-settings.jpg\"\n        srcset=\"/static/5be16484e130abb9660cba09991549e4/75985/github-settings.jpg 150w,\n/static/5be16484e130abb9660cba09991549e4/f93b5/github-settings.jpg 300w,\n/static/5be16484e130abb9660cba09991549e4/b4294/github-settings.jpg 600w,\n/static/5be16484e130abb9660cba09991549e4/8e1fc/github-settings.jpg 900w,\n/static/5be16484e130abb9660cba09991549e4/e5166/github-settings.jpg 1200w,\n/static/5be16484e130abb9660cba09991549e4/47999/github-settings.jpg 1505w\"\n        sizes=\"(max-width: 600px) 100vw, 600px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>With the basic set up done, let’s see some code.</p>\n<h2>GitHub Actions YAML</h2>\n<p>Here’s the YAML file that automatically uploads my Unity games to itch.io:</p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> Build and deploy\n\n<span class=\"token key atrule\">on</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">push</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">branches</span><span class=\"token punctuation\">:</span>\n      <span class=\"token punctuation\">-</span> main\n\n<span class=\"token key atrule\">env</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">PROJECT_NAME</span><span class=\"token punctuation\">:</span> YOUR_GAME\n\n<span class=\"token key atrule\">jobs</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">buildAndTestForLinuxBasedPlatforms</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> Build for $<span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> matrix.targetPlatform <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span>\n    <span class=\"token key atrule\">runs-on</span><span class=\"token punctuation\">:</span> ubuntu<span class=\"token punctuation\">-</span><span class=\"token number\">24.04</span>\n    <span class=\"token key atrule\">strategy</span><span class=\"token punctuation\">:</span>\n      <span class=\"token key atrule\">fail-fast</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">false</span>\n      <span class=\"token key atrule\">matrix</span><span class=\"token punctuation\">:</span>\n        <span class=\"token key atrule\">projectPath</span><span class=\"token punctuation\">:</span>\n          <span class=\"token punctuation\">-</span> ./\n        <span class=\"token key atrule\">unityVersion</span><span class=\"token punctuation\">:</span>\n          <span class=\"token punctuation\">-</span> 2022.3.12f1\n        <span class=\"token key atrule\">targetPlatform</span><span class=\"token punctuation\">:</span>\n          <span class=\"token punctuation\">-</span> WebGL <span class=\"token comment\"># Must be valid options for Unity: https://docs.unity3d.com/ScriptReference/BuildTarget.html</span>\n    <span class=\"token key atrule\">steps</span><span class=\"token punctuation\">:</span>\n      <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">uses</span><span class=\"token punctuation\">:</span> actions/checkout@v4\n        <span class=\"token key atrule\">with</span><span class=\"token punctuation\">:</span>\n          <span class=\"token key atrule\">fetch-depth</span><span class=\"token punctuation\">:</span> <span class=\"token number\">0</span>\n      <span class=\"token comment\"># Unity builds take some time, so we do some caching to make builds faster</span>\n      <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">uses</span><span class=\"token punctuation\">:</span> actions/cache@v3\n        <span class=\"token key atrule\">with</span><span class=\"token punctuation\">:</span>\n          <span class=\"token key atrule\">path</span><span class=\"token punctuation\">:</span> $<span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> matrix.projectPath <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span>/Library\n          <span class=\"token key atrule\">key</span><span class=\"token punctuation\">:</span> Library<span class=\"token punctuation\">-</span>$<span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> env.PROJECT_NAME <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">-</span>$<span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> matrix.unityVersion <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">-</span>$<span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> matrix.targetPlatform <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span>\n          <span class=\"token key atrule\">restore-keys</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">|</span><span class=\"token scalar string\">\n            Library-${{ env.PROJECT_NAME }}-${{ matrix.unityVersion }}-\n            Library-${{ env.PROJECT_NAME }}-\n            Library-</span>\n      <span class=\"token comment\"># We use Game CI (https://game.ci/) to buld the project</span>\n      <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">uses</span><span class=\"token punctuation\">:</span> game<span class=\"token punctuation\">-</span>ci/unity<span class=\"token punctuation\">-</span>builder@v4\n        <span class=\"token key atrule\">env</span><span class=\"token punctuation\">:</span>\n          <span class=\"token key atrule\">UNITY_LICENSE</span><span class=\"token punctuation\">:</span> $<span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> secrets.UNITY_LICENSE <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span>\n          <span class=\"token key atrule\">UNITY_EMAIL</span><span class=\"token punctuation\">:</span> $<span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> secrets.UNITY_EMAIL <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span>\n          <span class=\"token key atrule\">UNITY_PASSWORD</span><span class=\"token punctuation\">:</span> $<span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> secrets.UNITY_PASSWORD <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span>\n        <span class=\"token key atrule\">with</span><span class=\"token punctuation\">:</span>\n          <span class=\"token key atrule\">projectPath</span><span class=\"token punctuation\">:</span> $<span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> matrix.projectPath <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span>\n          <span class=\"token key atrule\">unityVersion</span><span class=\"token punctuation\">:</span> $<span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> matrix.unityVersion <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span>\n          <span class=\"token key atrule\">targetPlatform</span><span class=\"token punctuation\">:</span> $<span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> matrix.targetPlatform <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span>\n          <span class=\"token key atrule\">buildName</span><span class=\"token punctuation\">:</span> $<span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> env.PROJECT_NAME <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span>\n          <span class=\"token key atrule\">buildsPath</span><span class=\"token punctuation\">:</span> build/$<span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> matrix.unityVersion <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span>/$<span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> matrix.targetPlatform <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span>\n      <span class=\"token comment\"># Publish the build to itch.io</span>\n      <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">uses</span><span class=\"token punctuation\">:</span> manleydev/butler<span class=\"token punctuation\">-</span>publish<span class=\"token punctuation\">-</span>itchio<span class=\"token punctuation\">-</span>action@v1.0.3\n        <span class=\"token key atrule\">env</span><span class=\"token punctuation\">:</span>\n          <span class=\"token key atrule\">BUTLER_CREDENTIALS</span><span class=\"token punctuation\">:</span> $<span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> secrets.BUTLER_CREDENTIALS <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span>\n          <span class=\"token key atrule\">CHANNEL</span><span class=\"token punctuation\">:</span> html5\n          <span class=\"token key atrule\">ITCH_GAME</span><span class=\"token punctuation\">:</span> $<span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> vars.ITCH_GAME <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span>\n          <span class=\"token key atrule\">ITCH_USER</span><span class=\"token punctuation\">:</span> $<span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> vars.ITCH_USER <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span>\n          <span class=\"token key atrule\">PACKAGE</span><span class=\"token punctuation\">:</span> build/$<span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> matrix.unityVersion <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span>/$<span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> matrix.targetPlatform <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span></code></pre></div>\n<p>Let’s break down what each section is doing!</p>\n<p>To start, we give the job a name:</p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> Build and deploy</code></pre></div>\n<p>And tell GitHub to run this action every time we push code on the <code class=\"language-text\">main</code> branch:</p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token key atrule\">on</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">push</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">branches</span><span class=\"token punctuation\">:</span>\n      <span class=\"token punctuation\">-</span> main</code></pre></div>\n<p>Yes, this triggers if you make a branch and merge it to main as well.</p>\n<p>You can define environment variables in the repository settings, and in your files:</p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token key atrule\">env</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">PROJECT_NAME</span><span class=\"token punctuation\">:</span> YOUR_GAME</code></pre></div>\n<blockquote>\n<p><strong>Note</strong>: secrets, environment variables defined in the settings and environment variables defined in the workflow files are all referenced different. Their namespaces are <code class=\"language-text\">secrets</code>, <code class=\"language-text\">vars</code>, and <code class=\"language-text\">env</code> respectively. This may trip you up sometimes, as it has for the author…</p>\n</blockquote>\n<p>Now we define our <code class=\"language-text\">job</code>:</p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token key atrule\">jobs</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">buildAndTestForLinuxBasedPlatforms</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> Build for $<span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> matrix.targetPlatform <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span>\n    <span class=\"token key atrule\">runs-on</span><span class=\"token punctuation\">:</span> ubuntu<span class=\"token punctuation\">-</span><span class=\"token number\">24.04</span>\n    <span class=\"token key atrule\">strategy</span><span class=\"token punctuation\">:</span>\n      <span class=\"token key atrule\">fail-fast</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">false</span>\n      <span class=\"token key atrule\">matrix</span><span class=\"token punctuation\">:</span>\n        <span class=\"token key atrule\">projectPath</span><span class=\"token punctuation\">:</span>\n          <span class=\"token punctuation\">-</span> ./\n        <span class=\"token key atrule\">unityVersion</span><span class=\"token punctuation\">:</span>\n          <span class=\"token punctuation\">-</span> 2022.3.12f1\n        <span class=\"token key atrule\">targetPlatform</span><span class=\"token punctuation\">:</span>\n          <span class=\"token punctuation\">-</span> WebGL</code></pre></div>\n<p>I want to draw your attention to a few things. First, we run this code on Ubuntu, as of the time of writing, the most recent stable version. Why? When you’re using GitHub’s servers (or hosts as they call it) to deploy your software, Linux OSes are cheaper to use than Windows or Mac. Unless a particular library you’re using needs Windows/MacOS to build, if you’re making a web game it’s cheaper to use a Linux distro. Of course, if you’re automating Windows or Mac builds, you need to use their OSes as well.</p>\n<p>Note how we define the Unity version and the target platform. These will later be used for the GameCI step. However, having it in an array here allows us to do multiple builds with different parameters as we see fit, in addition to making it easy to reference by various steps.</p>\n<p>After setting up the job, we start by adding our first step, which is a caching step:</p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token key atrule\">steps</span><span class=\"token punctuation\">:</span>\n  <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">uses</span><span class=\"token punctuation\">:</span> actions/checkout@v4\n    <span class=\"token key atrule\">with</span><span class=\"token punctuation\">:</span>\n      <span class=\"token key atrule\">fetch-depth</span><span class=\"token punctuation\">:</span> <span class=\"token number\">0</span>\n  <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">uses</span><span class=\"token punctuation\">:</span> actions/cache@v3\n    <span class=\"token key atrule\">with</span><span class=\"token punctuation\">:</span>\n      <span class=\"token key atrule\">path</span><span class=\"token punctuation\">:</span> $<span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> matrix.projectPath <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span>/Library\n      <span class=\"token key atrule\">key</span><span class=\"token punctuation\">:</span> Library<span class=\"token punctuation\">-</span>$<span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> env.PROJECT_NAME <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">-</span>$<span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> matrix.unityVersion <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">-</span>$<span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> matrix.targetPlatform <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span>\n      <span class=\"token key atrule\">restore-keys</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">|</span><span class=\"token scalar string\">\n        Library-${{ env.PROJECT_NAME }}-${{ matrix.unityVersion }}-\n        Library-${{ env.PROJECT_NAME }}-\n        Library-</span></code></pre></div>\n<p>Unity caches data in the Library folder, I encourage you to <a href=\"https://docs.unity3d.com/6000.0/Documentation/Manual/AssetDatabase.html\">read more</a> from their docs. As GitHub Actions run on a clean slate every build, we have to do this step to preserve the Library folder. This can significantly speed up subsequent builds!</p>\n<p>Now, we actually make the build:</p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token punctuation\">-</span> <span class=\"token key atrule\">uses</span><span class=\"token punctuation\">:</span> game<span class=\"token punctuation\">-</span>ci/unity<span class=\"token punctuation\">-</span>builder@v4\n  <span class=\"token key atrule\">env</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">UNITY_LICENSE</span><span class=\"token punctuation\">:</span> $<span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> secrets.UNITY_LICENSE <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span>\n    <span class=\"token key atrule\">UNITY_EMAIL</span><span class=\"token punctuation\">:</span> $<span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> secrets.UNITY_EMAIL <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span>\n    <span class=\"token key atrule\">UNITY_PASSWORD</span><span class=\"token punctuation\">:</span> $<span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> secrets.UNITY_PASSWORD <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span>\n  <span class=\"token key atrule\">with</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">projectPath</span><span class=\"token punctuation\">:</span> $<span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> matrix.projectPath <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span>\n    <span class=\"token key atrule\">unityVersion</span><span class=\"token punctuation\">:</span> $<span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> matrix.unityVersion <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span>\n    <span class=\"token key atrule\">targetPlatform</span><span class=\"token punctuation\">:</span> $<span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> matrix.targetPlatform <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span>\n    <span class=\"token key atrule\">buildName</span><span class=\"token punctuation\">:</span> $<span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> env.PROJECT_NAME <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span>\n    <span class=\"token key atrule\">buildsPath</span><span class=\"token punctuation\">:</span> build/$<span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> matrix.unityVersion <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span>/$<span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> matrix.targetPlatform <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span></code></pre></div>\n<p>Once we have our secrets set up correctly, this should interact with Unity engine to build for us. Notice how we configure the action with <code class=\"language-text\">projectPath</code>, <code class=\"language-text\">unityVersion</code>, and <code class=\"language-text\">targetPlatform</code> that were defined when we set up the job. If we wanted to build with multiple versions of Unity, or more likely, build for multiple target platforms, we should be able to do that without the project files of each variation clashing with each other!</p>\n<p>Finally, we push the game’s build to itch.io:</p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token punctuation\">-</span> <span class=\"token key atrule\">uses</span><span class=\"token punctuation\">:</span> manleydev/butler<span class=\"token punctuation\">-</span>publish<span class=\"token punctuation\">-</span>itchio<span class=\"token punctuation\">-</span>action@v1.0.3\n  <span class=\"token key atrule\">env</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">BUTLER_CREDENTIALS</span><span class=\"token punctuation\">:</span> $<span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> secrets.BUTLER_CREDENTIALS <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span>\n    <span class=\"token key atrule\">CHANNEL</span><span class=\"token punctuation\">:</span> html5\n    <span class=\"token key atrule\">ITCH_GAME</span><span class=\"token punctuation\">:</span> $<span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> vars.ITCH_GAME <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span>\n    <span class=\"token key atrule\">ITCH_USER</span><span class=\"token punctuation\">:</span> $<span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> vars.ITCH_USER <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span>\n    <span class=\"token key atrule\">PACKAGE</span><span class=\"token punctuation\">:</span> build/$<span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> matrix.unityVersion <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span>/$<span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> matrix.targetPlatform <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span></code></pre></div>\n<p>It’s super important to ensure that the <code class=\"language-text\">PACKAGE</code> value matches the location of the build i.e. the <code class=\"language-text\">buildsPath</code> value in the GameCI step.</p>\n<p>And that’s it! Add this YAML to a file in your <code class=\"language-text\">.github/workflows</code> folder (make one if it doesn’t exist) - and you’ll have automated builds!</p>\n<h2>One Time itch.io Configuration</h2>\n<p>For web builds, once the first build is pushed up, you need to:</p>\n<ul>\n<li>Head over to your itch.io project page</li>\n<li>Under the “Uploads” section, select the checkbox to indicate the build is going to be played in the browser</li>\n</ul>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 548px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/fc4fc792a35a4f7d4bf90d42e70b235a/a8866/itchio-html-build-checkbox.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 16%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAADABQDASIAAhEBAxEB/8QAFwABAAMAAAAAAAAAAAAAAAAAAAECBf/EABQBAQAAAAAAAAAAAAAAAAAAAAD/2gAMAwEAAhADEAAAAceAoD//xAAWEAADAAAAAAAAAAAAAAAAAAAAARD/2gAIAQEAAQUCHP/EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8BP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8BP//EABQQAQAAAAAAAAAAAAAAAAAAABD/2gAIAQEABj8Cf//EABcQAAMBAAAAAAAAAAAAAAAAAAABECH/2gAIAQEAAT8hEyf/2gAMAwEAAgADAAAAEIPP/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPxA//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPxA//8QAGRABAAIDAAAAAAAAAAAAAAAAAQAxEBEh/9oACAEBAAE/ELNtwgIdXH//2Q=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Image of itch.io project settings page, showing the checkbox that makes the web build playable\"\n        title=\"\"\n        src=\"/static/fc4fc792a35a4f7d4bf90d42e70b235a/a8866/itchio-html-build-checkbox.jpg\"\n        srcset=\"/static/fc4fc792a35a4f7d4bf90d42e70b235a/75985/itchio-html-build-checkbox.jpg 150w,\n/static/fc4fc792a35a4f7d4bf90d42e70b235a/f93b5/itchio-html-build-checkbox.jpg 300w,\n/static/fc4fc792a35a4f7d4bf90d42e70b235a/a8866/itchio-html-build-checkbox.jpg 548w\"\n        sizes=\"(max-width: 548px) 100vw, 548px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span>.</p>\n<p>And with that, you’re good to go!</p>\n<h2>Conclusion</h2>\n<p>Automated builds are a timesaver, after setting this once you deploy new versions of your game without having to think - all you need to do is push your code. Of course, this article is geared towards game jams. In other real projects, you might to create Android build files, or Windows executables. Instead of automatically updating itch.io, you might want to download and test the game first and manually deploy. Deeper knowledge of GitHub Actions will take you far, but this is a good place to start.</p>\n<p>Happy game deving!</p>","frontmatter":{"title":"Automated Unity Builds from GitHub to itch.io","tags":["unity","game development","ci"],"date":"2024-07-23","updated":"2024-08-05"}},"previous":{"fields":{"slug":"/blog/2024/06/11/manually-configuring-an-aws-amplify-session"},"frontmatter":{"title":"Manually Configuring an AWS Amplify Session"}},"next":{"fields":{"slug":"/blog/2024/08/05/swipe-to-move-in-unity-making-a-desktop-game-mobile-friendly"},"frontmatter":{"title":"Swipe to Move in Unity: Making a Desktop Game Mobile Friendly"}}},"pageContext":{"id":"602dc378-2b56-5845-995f-13776573c8d3","previousPostId":"8781df42-30d4-5d75-b096-d047cb55ef2b","nextPostId":"84bc4a83-8e78-5421-81d0-2f0c7ee20505"}},"staticQueryHashes":["1391858338"],"slicesMap":{}}